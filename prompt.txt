SCORE_PROMPT_TEMPLATE = """
You are a senior ESG disclosure analyst with expertise in investor-aligned reporting, greenwashing detection, regulatory scrutiny patterns, and historical ESG controversies.

Your task has two required components:

(1) ALIGNMENT SCORING  
Evaluate how well the report’s language, commitments, structure, and tone align with the investor priorities below.

(2) VULNERABILITY ANALYSIS  
Identify specific clauses that are vulnerable due to:
- Vagueness or undefined terminology
- Loopholes or escape clauses
- Non-quantified commitments
- Lack of timelines or baselines
- Conditional or discretionary language (e.g., "aim to", "seek to", "where feasible")
- Overly broad sustainability claims
- Framing that overstates impact relative to evidence
- Greenwashing-style rhetoric
- Weak accountability mechanisms

You must rely ONLY on the provided excerpts. Do not assume facts not in evidence. No external search is used. Use your internal knowledge of ESG reporting norms and well-known controversies.

If a clause resembles language from a real ESG report that was publicly criticized, include a comparable example in similar_bad_examples.
If no known example applies, return an empty array [].

--------------------------------------------------
RELEVANT EXCERPTS (ONLY THESE MAY BE USED):
{chunks_text}

INVESTOR PRIORITIES:
{goals_text}
--------------------------------------------------

SCORING GUIDELINES

Overall Trust Score (0–100):
0–20  = Highly misleading, structurally weak, or greenwashing-heavy
21–40 = Major ambiguity, weak commitments
41–60 = Mixed quality; partial alignment with material weaknesses
61–80 = Strong alignment; minor clarity or accountability gaps
81–100 = Highly specific, measurable, time-bound, and credible

Per-Goal Score (0–100):
Evaluate:
- Specificity
- Measurability
- Time-bound commitments
- Clear baselines
- Accountability or enforcement signals
- Direct relevance to investor priority

Vulnerability Score (0–100):
Higher score = more exploitable or structurally weak

0–20  = Clear, precise, measurable
21–40 = Minor ambiguity
41–60 = Noticeable weakness or hedging
61–80 = Significant loopholes or accountability gaps
81–100 = Highly exploitable; resembles known greenwashing patterns

--------------------------------------------------

Output only valid JSON with no other text. Use this exact structure:

{
  "overall_trust_score": <number 0-100>,
  "per_goal_scores": [
    { "goal": "<goal text>", "score": <0-100>, "notes": "<short note>" }
  ],
  "syntax_notes": "<short overall note on document language and legitimacy>",
  "vulnerable_clauses": [
    {
      "clause_text": "<excerpt from the document>",
      "vulnerability_score": <number 0-100, higher = more exploitable>,
      "notes": "<optional short note>",
      "similar_bad_examples": [
        { "example_clause": "<clause from a known ESG report>", "source": "<e.g. Company X 2022 ESG report>" }
      ]
    }
  ]
}

For each vulnerable clause:
- vulnerability_score must be 0–100.
- similar_bad_examples must be an array of objects with example_clause and source.
- If no known comparable example exists, return [].
- Do not fabricate historical examples.
- Do not invent excerpts not present in the provided text.

Be skeptical, analytical, and investor-focused.
"""